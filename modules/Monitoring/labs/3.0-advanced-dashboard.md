# Lab: Advanced Dashboarding in Grafana

## Overview

In this lab, you'll build on your knowledge of Grafana, Prometheus, and Loki to create a comprehensive dashboard for your API or Kubernetes environment. You'll explore community dashboards, integrate logs, and visualize key metrics like replicas, latency, and availability.

## Scenario

Your platform team owns an internal API used by multiple services.
You have an SLO:
- Availability ≥ 99%
- p95 latency ≤ 500ms

Your task is to build a Grafana dashboard that allows an on-call engineer
to quickly determine whether this SLO is currently being violated.

### Required SLO Panels

Your dashboard must allow you to answer:

Is the service up?

Is it fast for users?

Is it scaling correctly?

Can I debug it quickly?

---

## Part 1: Get Inspired – Import a Community Dashboard

1. Go to [Grafana Dashboards](https://grafana.com/grafana/dashboards/).
2. Search for dashboards related to **Kubernetes** or **API metrics**.
3. Pick one that matches your stack (e.g., Prometheus, Loki, Kubernetes).
4. In Grafana, click **+ > Import** and paste the dashboard ID or JSON.
5. Explore the panels and see what ideas you can use in your own dashboard.

*Tip: You can copy panels from imported dashboards into your own!*

---

## Part 2: Build Your Own Dashboard

Create a new dashboard with the following features:

### 1. Application Logs Panel
- Add a **Logs** panel using your Loki data source.
- Add a **variable** (e.g., `search`) so users can filter logs by keyword or field.
- Example LogQL: `{app="your-api"} |~ "$search"`

### 2. Number of Replicas
- Add a **Stat** or **Gauge** panel showing the current number of running replicas for your API or deployment.
- Prometheus query example: `kube_deployment_status_replicas_available{deployment="your-api"}`

### 3. Latency Visualization
- Add a **Time series** panel for API latency (e.g., 95th percentile response time).
- Prometheus query example: `histogram_quantile(0.95, sum(rate(http_request_duration_seconds_bucket{job="your-api"}[5m])) by (le))`

### 4. Availability Panel
- Add a **Stat** or **Time series** panel for API availability (e.g., success rate).
- Prometheus query example: `sum(rate(http_requests_total{job="your-api",status!~"5.."}[5m])) / sum(rate(http_requests_total{job="your-api"}[5m]))`

---

## Part 3: Polish and Share

- Add a dashboard title and description.
- Use variables for namespace, deployment, or search terms to make your dashboard reusable.
- Save your dashboard and export it as JSON.
- (Optional) Share your dashboard with the class or upload it to grafana.com!

---

## Challenge: Add More Insights

- Add panels for error rates, request throughput, or custom business metrics.
- Try combining logs and metrics in the same dashboard for richer troubleshooting.
- Create a seperate dashboard that focuses more on the Cluster and all application running inside of it.

---

## Submission

Export your dashboard JSON and submit it as instructed by your instructor.
